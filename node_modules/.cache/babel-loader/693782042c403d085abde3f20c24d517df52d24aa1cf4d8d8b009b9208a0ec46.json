{"ast":null,"code":"import React,{useState}from\"react\";import'./Home.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const[selectedFile,setSelectedFile]=useState(null);const[messages,setMessages]=useState([]);// State to store chat messages\nconst[userMessage,setUserMessage]=useState(\"\");// State to store the user's input message\nconst[loading,setLoading]=useState(false);// State to show typing indicator\n// Handle file selection\nconst handleFileChange=event=>{setSelectedFile(event.target.files[0]);};// Handle file upload\nconst handleFileUpload=()=>{if(!selectedFile){alert(\"Please select a file first\");return;}const formData=new FormData();formData.append('file',selectedFile);fetch(`${process.env.REACT_APP_BACKEND_URL}/api/upload`,{method:'POST',body:formData,credentials:'include'// Include cookies in the request\n}).then(response=>response.json()).then(data=>{alert('File uploaded successfully');console.log(data);}).catch(error=>console.error(\"Error:\",error));};// Handle user message submission\nconst handleSendMessage=()=>{if(!userMessage.trim())return;// Display the user message in the chatbox\nsetMessages(prevMessages=>[...prevMessages,{sender:'user',text:userMessage}]);// Show typing indicator\nsetLoading(true);// Sending the message to the backend to get the response\nfetch(`${process.env.REACT_APP_BACKEND_URL}/chatgpt`,{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({content:userMessage})// Send the message in JSON format\n}).then(response=>response.json()).then(data=>{// Remove the typing indicator\nsetLoading(false);// Display the bot response in the chatbox\nsetMessages(prevMessages=>[...prevMessages,{sender:'bot',text:data.response}]);}).catch(error=>{console.error(\"Error:\",error);// Remove typing indicator in case of error\nsetLoading(false);});// Clear the input field\nsetUserMessage(\"\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"RAG App\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleFileUpload,children:\"Upload File\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chatbox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-history\",children:[messages.map((message,index)=>/*#__PURE__*/_jsxs(\"div\",{className:`chat-message ${message.sender}`,children:[message.sender==='bot'&&/*#__PURE__*/_jsx(\"img\",{src:\"https://psrassuarancedev.webgen.me/wp-content/uploads/image_2024_07_23T12_52_23_903Z-removebg-preview.png\",alt:\"Bot Icon\",className:\"bot-icon\"}),/*#__PURE__*/_jsx(\"p\",{children:message.text}),message.sender==='user'&&/*#__PURE__*/_jsx(\"img\",{src:\"https://psrassuarancedev.webgen.me/wp-content/uploads/chat_user.png\",alt:\"User Icon\",className:\"user-icon\"})]},index)),loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"chat-message bot typing-indicator\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dot\"}),/*#__PURE__*/_jsx(\"div\",{className:\"dot\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-input\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:userMessage,onChange:e=>setUserMessage(e.target.value),placeholder:\"Type your message...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendMessage,children:\"Send\"})]})]})]});};export default Home;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Home","selectedFile","setSelectedFile","messages","setMessages","userMessage","setUserMessage","loading","setLoading","handleFileChange","event","target","files","handleFileUpload","alert","formData","FormData","append","fetch","process","env","REACT_APP_BACKEND_URL","method","body","credentials","then","response","json","data","console","log","catch","error","handleSendMessage","trim","prevMessages","sender","text","headers","JSON","stringify","content","className","children","type","onChange","onClick","map","message","index","src","alt","value","e","placeholder"],"sources":["/home/sourav/Documents/frontend_langchain/src/Home.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport './Home.css';\n\nconst Home = () => {\n    const [selectedFile, setSelectedFile] = useState(null);\n    const [messages, setMessages] = useState([]);  // State to store chat messages\n    const [userMessage, setUserMessage] = useState(\"\");  // State to store the user's input message\n    const [loading, setLoading] = useState(false);  // State to show typing indicator\n\n    // Handle file selection\n    const handleFileChange = (event) => {\n        setSelectedFile(event.target.files[0]);\n    };\n\n    // Handle file upload\n    const handleFileUpload = () => {\n        if (!selectedFile) {\n            alert(\"Please select a file first\");\n            return;\n        }\n\n        const formData = new FormData();\n        formData.append('file', selectedFile);\n\n        fetch(\n            `${process.env.REACT_APP_BACKEND_URL}/api/upload`, {\n                method: 'POST',\n                body: formData,\n                credentials: 'include'  // Include cookies in the request\n            }\n        )\n        .then(response => response.json())\n        .then(data => {\n            alert('File uploaded successfully');\n            console.log(data);\n        })\n        .catch(error => console.error(\"Error:\", error));\n    };\n\n    // Handle user message submission\n    const handleSendMessage = () => {\n        if (!userMessage.trim()) return;\n\n        // Display the user message in the chatbox\n        setMessages(prevMessages => [...prevMessages, { sender: 'user', text: userMessage }]);\n\n        // Show typing indicator\n        setLoading(true);\n\n        // Sending the message to the backend to get the response\n        fetch(`${process.env.REACT_APP_BACKEND_URL}/chatgpt`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            credentials: 'include',\n            body: JSON.stringify({ content: userMessage })  // Send the message in JSON format\n        })\n        .then(response => response.json())\n        .then(data => {\n            // Remove the typing indicator\n            setLoading(false);\n            // Display the bot response in the chatbox\n            setMessages(prevMessages => [...prevMessages, { sender: 'bot', text: data.response }]);\n        })\n        .catch(error => {\n            console.error(\"Error:\", error);\n            // Remove typing indicator in case of error\n            setLoading(false);\n        });\n\n        // Clear the input field\n        setUserMessage(\"\");\n    };\n\n    return (\n        <div className=\"home-container\">\n            <h1>RAG App</h1>\n\n            {/* File Upload Section */}\n            <div>\n                <input type=\"file\" onChange={handleFileChange}/>\n                <button onClick={handleFileUpload}>Upload File</button>\n            </div>\n\n            {/* Chatbox Section */}\n            <div className=\"chatbox\">\n                {/* Chat History */}\n                <div className=\"chat-history\">\n                    {messages.map((message, index) => (\n                        <div key={index} className={`chat-message ${message.sender}`}>\n                            {/* Display user/bot icon based on sender */}\n                            {message.sender === 'bot' && (\n                                <img\n                                    src=\"https://psrassuarancedev.webgen.me/wp-content/uploads/image_2024_07_23T12_52_23_903Z-removebg-preview.png\"\n                                    alt=\"Bot Icon\"\n                                    className=\"bot-icon\"\n                                />\n                            )}\n                            <p>{message.text}</p>\n                            {message.sender === 'user' && (\n                                <img\n                                    src=\"https://psrassuarancedev.webgen.me/wp-content/uploads/chat_user.png\"\n                                    alt=\"User Icon\"\n                                    className=\"user-icon\"\n                                />\n                            )}\n                        </div>\n                    ))}\n                    {/* Show typing indicator if loading */}\n                    {loading && (\n                        <div className=\"chat-message bot typing-indicator\">\n                            <div className=\"dot\"></div>\n                            <div className=\"dot\"></div>\n                            <div className=\"dot\"></div>\n                        </div>\n                    )}\n                </div>\n\n                {/* Chat Input */}\n                <div className=\"chat-input\">\n                    <textarea\n                        value={userMessage}\n                        onChange={(e) => setUserMessage(e.target.value)}\n                        placeholder=\"Type your message...\"\n                    ></textarea>\n                    <button onClick={handleSendMessage}>Send</button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}